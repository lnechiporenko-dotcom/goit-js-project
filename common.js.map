{"version":3,"file":"common.js","sources":["../src/js/global-notification.js","../src/js/form-validation.js","../src/js/rating-modal.js","../src/js/favorites.js","../src/js/header.js","../src/js/exercise-modal.js","../src/js/exercises.js","../src/js/email-validation.js","../src/js/quote.js","../src/main.js"],"sourcesContent":["// Global notification system\nlet notificationTimeout = null;\n\n/**\n * Shows a global notification message\n * @param {string} message - The message to display\n * @param {string} type - The type of notification ('success' or 'error')\n */\nexport function showGlobalNotification(message, type = 'success') {\n  const notification = document.getElementById('js-global-notification');\n  const textElement = document.getElementById('js-global-notification-text');\n\n  if (!notification || !textElement) return;\n\n  if (notificationTimeout) {\n    clearTimeout(notificationTimeout);\n    notificationTimeout = null;\n  }\n\n  textElement.textContent = message;\n  notification.classList.remove('global-notification--error');\n  if (type === 'error') {\n    notification.classList.add('global-notification--error');\n  } else if (type === 'warning') {\n    notification.classList.add('global-notification--warning');\n  }\n\n  notification.classList.add('global-notification--visible');\n\n  notificationTimeout = setTimeout(() => {\n    hideGlobalNotification();\n  }, 3000);\n}\n\nexport function hideGlobalNotification() {\n  const notification = document.getElementById('js-global-notification');\n  const textElement = document.getElementById('js-global-notification-text');\n\n  if (!notification) return;\n\n  if (notificationTimeout) {\n    clearTimeout(notificationTimeout);\n    notificationTimeout = null;\n  }\n\n  notification.classList.remove('global-notification--visible');\n\n  setTimeout(() => {\n    if (textElement) {\n      textElement.textContent = '';\n    }\n    notification.classList.remove('global-notification--error', 'global-notification--warning');\n  }, 300);\n}\n\nexport function initGlobalNotification() {\n  const closeBtn = document.getElementById('js-global-notification-close');\n\n  if (closeBtn) {\n    closeBtn.addEventListener('click', hideGlobalNotification);\n  }\n}\n","/**\n * Form validation utilities module\n * Provides reusable functions for form field validation and error display\n */\n\n/**\n * Shows an error message for a form field\n * @param {HTMLElement} inputElement - The input/textarea element\n * @param {HTMLElement} errorElement - The element to display error message\n * @param {string} message - The error message to display\n */\nexport function showFieldError(inputElement, errorElement, message) {\n  if (inputElement) {\n    const errorClass = inputElement.classList.contains('rating-modal__textarea')\n      ? 'rating-modal__textarea--error'\n      : inputElement.classList.contains('rating-modal__input')\n      ? 'rating-modal__input--error'\n      : inputElement.classList.contains('footer__subscribe-form-input')\n      ? 'footer__subscribe-form-input--error'\n      : 'form-field--error';\n\n    inputElement.classList.add(errorClass);\n  }\n\n  if (errorElement) {\n    errorElement.textContent = message;\n    errorElement.classList.add('form-error--visible');\n  }\n}\n\n/**\n * Hides the error message for a form field\n * @param {HTMLElement} inputElement - The input/textarea element\n * @param {HTMLElement} errorElement - The element displaying error message\n */\nexport function hideFieldError(inputElement, errorElement) {\n  if (inputElement) {\n    inputElement.classList.remove(\n      'rating-modal__input--error',\n      'rating-modal__textarea--error',\n      'footer__subscribe-form-input--error',\n      'form-field--error'\n    );\n  }\n\n  if (errorElement) {\n    errorElement.textContent = '';\n    errorElement.classList.remove('form-error--visible');\n  }\n}\n\n/**\n * Validates an email address\n * @param {string} email - The email address to validate\n * @returns {boolean} True if email is valid, false otherwise\n */\nexport function validateEmail(email) {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(email);\n}\n\n/**\n * Validates that a field is not empty\n * @param {string} value - The value to validate\n * @returns {boolean} True if value is not empty, false otherwise\n */\nexport function validateRequired(value) {\n  return value.trim().length > 0;\n}\n\ndocument.getElementById('year').textContent = new Date().getFullYear();","import { showGlobalNotification } from './global-notification.js';\nimport {\n  showFieldError,\n  hideFieldError,\n  validateEmail,\n} from './form-validation.js';\n\n// Змінна для зберігання ID вправи для рейтингу\nlet currentExerciseIdForRating = null;\n\n// Helper functions for server messages\nfunction showServerMessage(message, type = 'error') {\n  const messageElement = document.getElementById('js-rating-server-message');\n  const messageTextElement = document.getElementById(\n    'js-rating-server-message-text'\n  );\n  if (!messageElement || !messageTextElement) return;\n\n  messageTextElement.textContent = message;\n  messageElement.classList.remove(\n    'rating-modal__server-message--error',\n    'rating-modal__server-message--success'\n  );\n  messageElement.classList.add(`rating-modal__server-message--${type}`);\n  messageElement.classList.add('rating-modal__server-message--visible');\n}\n\nfunction hideServerMessage() {\n  const messageElement = document.getElementById('js-rating-server-message');\n  const messageTextElement = document.getElementById(\n    'js-rating-server-message-text'\n  );\n  if (!messageElement) return;\n\n  messageElement.classList.remove('rating-modal__server-message--visible');\n  if (messageTextElement) {\n    messageTextElement.textContent = '';\n  }\n  messageElement.classList.remove(\n    'rating-modal__server-message--error',\n    'rating-modal__server-message--success'\n  );\n}\n\n// Функція для закриття модального вікна рейтингу\nfunction closeRatingModal() {\n  const modal = document.getElementById('js-rating-modal');\n  if (!modal) return;\n\n  modal.classList.remove('rating-modal--open');\n  document.body.style.overflow = '';\n  currentExerciseIdForRating = null;\n\n  // Clear all errors when closing\n  const emailInput = document.getElementById('js-rating-modal-email');\n  const emailError = document.getElementById('js-email-error');\n  const commentTextarea = document.getElementById('js-rating-modal-comment');\n  const commentError = document.getElementById('js-comment-error');\n  const ratingError = document.getElementById('js-rating-error');\n\n  hideFieldError(emailInput, emailError);\n  hideFieldError(commentTextarea, commentError);\n  hideFieldError(null, ratingError);\n  hideServerMessage();\n}\n\n// Функція для відкриття модального вікна рейтингу\nexport function openRatingModal(exerciseId) {\n  const modal = document.getElementById('js-rating-modal');\n  if (!modal) return;\n\n  currentExerciseIdForRating = exerciseId;\n\n  // Скидаємо форму\n  const form = document.getElementById('js-rating-modal-form');\n  const emailInput = document.getElementById('js-rating-modal-email');\n  const commentTextarea = document.getElementById('js-rating-modal-comment');\n  const ratingValue = document.getElementById('js-rating-modal-value');\n  const stars = document.querySelectorAll('.rating-modal__star');\n\n  if (form) form.reset();\n  if (ratingValue) ratingValue.textContent = '0.0';\n\n  // Clear all errors\n  const emailError = document.getElementById('js-email-error');\n  const commentError = document.getElementById('js-comment-error');\n  const ratingError = document.getElementById('js-rating-error');\n  hideFieldError(emailInput, emailError);\n  hideFieldError(commentTextarea, commentError);\n  hideFieldError(null, ratingError);\n  hideServerMessage();\n\n  // Скидаємо активні зірки\n  stars.forEach(star => {\n    star.classList.remove('rating-modal__star--active');\n    const svg = star.querySelector('svg');\n    if (svg) {\n      const path = svg.querySelector('path');\n      if (path) {\n        path.setAttribute('fill', 'none');\n        path.setAttribute('stroke', 'currentColor');\n      }\n    }\n  });\n\n  // Відкриваємо модальне вікно\n  modal.classList.add('rating-modal--open');\n  document.body.style.overflow = 'hidden';\n}\n\n// Експорт функції закриття для використання в інших модулях\nexport { closeRatingModal };\n\n// Ініціалізація event listeners для модального вікна рейтингу\nexport function initRatingModal() {\n  // Обробники для модального вікна рейтингу\n  const ratingModalCloseBtn = document.getElementById('js-rating-modal-close');\n  const ratingModal = document.getElementById('js-rating-modal');\n  const ratingModalOverlay = ratingModal?.querySelector(\n    '.rating-modal__overlay'\n  );\n\n  if (ratingModalCloseBtn) {\n    ratingModalCloseBtn.addEventListener('click', closeRatingModal);\n  }\n\n  if (ratingModalOverlay) {\n    ratingModalOverlay.addEventListener('click', closeRatingModal);\n  }\n\n  // Обробник для закриття серверного повідомлення\n  const serverMessageCloseBtn = document.getElementById(\n    'js-rating-server-message-close'\n  );\n  if (serverMessageCloseBtn) {\n    serverMessageCloseBtn.addEventListener('click', hideServerMessage);\n  }\n\n  // Обробка зірок рейтингу\n  const ratingStars = document.querySelectorAll('.rating-modal__star');\n  const ratingValue = document.getElementById('js-rating-modal-value');\n  let selectedRating = 0;\n\n  ratingStars.forEach((star, index) => {\n    star.addEventListener('click', () => {\n      selectedRating = index + 1;\n\n      if (ratingValue) {\n        ratingValue.textContent = selectedRating.toFixed(1);\n      }\n\n      // Оновлюємо зірки\n      ratingStars.forEach((s, i) => {\n        if (i < selectedRating) {\n          s.classList.add('rating-modal__star--active');\n          const svg = s.querySelector('svg');\n          if (svg) {\n            const path = svg.querySelector('path');\n            if (path) {\n              path.setAttribute('fill', '#EEA10C');\n              path.setAttribute('stroke', '#EEA10C');\n            }\n          }\n        } else {\n          s.classList.remove('rating-modal__star--active');\n          const svg = s.querySelector('svg');\n          if (svg) {\n            const path = svg.querySelector('path');\n            if (path) {\n              path.setAttribute('fill', 'none');\n              path.setAttribute('stroke', 'currentColor');\n            }\n          }\n        }\n      });\n    });\n\n    // Hover ефект\n    star.addEventListener('mouseenter', () => {\n      const hoverRating = index + 1;\n      ratingStars.forEach((s, i) => {\n        if (\n          i < hoverRating &&\n          !s.classList.contains('rating-modal__star--active')\n        ) {\n          s.style.color = 'rgba(255, 255, 255, 0.6)';\n        }\n      });\n    });\n\n    star.addEventListener('mouseleave', () => {\n      ratingStars.forEach((s, i) => {\n        if (!s.classList.contains('rating-modal__star--active')) {\n          s.style.color = 'rgba(255, 255, 255, 0.3)';\n        }\n      });\n    });\n  });\n\n  // Add input event listeners to clear errors on input\n  const emailInput = document.getElementById('js-rating-modal-email');\n  const emailError = document.getElementById('js-email-error');\n  const commentTextarea = document.getElementById('js-rating-modal-comment');\n  const commentError = document.getElementById('js-comment-error');\n\n  if (emailInput && emailError) {\n    emailInput.addEventListener('input', () => {\n      hideFieldError(emailInput, emailError);\n    });\n  }\n\n  if (commentTextarea && commentError) {\n    commentTextarea.addEventListener('input', () => {\n      hideFieldError(commentTextarea, commentError);\n    });\n  }\n\n  // Clear rating error when selecting a star\n  ratingStars.forEach(star => {\n    star.addEventListener('click', () => {\n      const ratingError = document.getElementById('js-rating-error');\n      if (ratingError) {\n        hideFieldError(null, ratingError);\n      }\n    });\n  });\n\n  // Обробка форми рейтингу\n  const ratingForm = document.getElementById('js-rating-modal-form');\n  if (ratingForm) {\n    ratingForm.addEventListener('submit', e => {\n      e.preventDefault();\n\n      const ratingStars = document.querySelectorAll('.rating-modal__star');\n      const ratingValue = document.getElementById('js-rating-modal-value');\n      const emailInput = document.getElementById('js-rating-modal-email');\n      const commentTextarea = document.getElementById(\n        'js-rating-modal-comment'\n      );\n      const emailError = document.getElementById('js-email-error');\n      const commentError = document.getElementById('js-comment-error');\n      const ratingError = document.getElementById('js-rating-error');\n\n      let selectedRating = 0;\n      let hasErrors = false;\n\n      // Знаходимо вибраний рейтинг\n      ratingStars.forEach((star, index) => {\n        if (star.classList.contains('rating-modal__star--active')) {\n          selectedRating = Math.max(selectedRating, index + 1);\n        }\n      });\n\n      // Validate rating\n      if (selectedRating === 0) {\n        showFieldError(null, ratingError, 'Please select a rating');\n        hasErrors = true;\n      } else {\n        hideFieldError(null, ratingError);\n      }\n\n      const email = emailInput?.value.trim() || '';\n      const review = commentTextarea?.value.trim() || '';\n\n      // Validate email\n      if (!email) {\n        showFieldError(emailInput, emailError, 'Please enter your email');\n        hasErrors = true;\n      } else if (!validateEmail(email)) {\n        showFieldError(\n          emailInput,\n          emailError,\n          'Please enter a valid email address'\n        );\n        hasErrors = true;\n      } else {\n        hideFieldError(emailInput, emailError);\n      }\n\n      // Validate comment\n      if (!review) {\n        showFieldError(\n          commentTextarea,\n          commentError,\n          'Please enter your comment'\n        );\n        hasErrors = true;\n      } else {\n        hideFieldError(commentTextarea, commentError);\n      }\n\n      // Stop if there are errors\n      if (hasErrors) {\n        return;\n      }\n\n      // Відправка рейтингу на сервер\n      if (currentExerciseIdForRating) {\n        // Clear previous server messages\n        hideServerMessage();\n\n        fetch(\n          `https://your-energy.b.goit.study/api/exercises/${currentExerciseIdForRating}/rating`,\n          {\n            method: 'PATCH',\n            headers: {\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n              rate: selectedRating,\n              email,\n              review,\n            }),\n          }\n        )\n          .then(async response => {\n            const data = await response.json();\n\n            if (!response.ok) {\n              // Get error message from server or use default\n              throw { message: data.message, data };\n            }\n\n            return data;\n          })\n          .then(data => {\n            closeRatingModal();\n            const exerciseName = data.name || 'the exercise';\n            showGlobalNotification(\n              `Thank you, your review for exercise ${exerciseName} has been submitted`,\n              'success'\n            );\n          })\n          .catch(error => {\n            const errorMessage =\n              error.message || 'Failed to submit rating. Please try again.';\n            showServerMessage(errorMessage, 'error');\n          });\n      }\n    });\n  }\n}\n","// LocalStorage key for favorites\nconst FAVORITES_KEY = 'favorites';\n\n// Get all favorite exercise IDs from LocalStorage\nexport function getFavorites() {\n  try {\n    const favorites = localStorage.getItem(FAVORITES_KEY);\n    return favorites ? JSON.parse(favorites) : [];\n  } catch (error) {\n    return [];\n  }\n}\n\n// Add exercise ID to favorites\nexport function addToFavorites(exerciseId) {\n  try {\n    const favorites = getFavorites();\n    if (!favorites.includes(exerciseId)) {\n      favorites.push(exerciseId);\n      localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));\n      return true;\n    }\n    return false;\n  } catch (error) {\n    return false;\n  }\n}\n\n// Remove exercise ID from favorites\nexport function removeFromFavorites(exerciseId) {\n  try {\n    const favorites = getFavorites();\n    const filteredFavorites = favorites.filter(id => id !== exerciseId);\n    localStorage.setItem(FAVORITES_KEY, JSON.stringify(filteredFavorites));\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\n\n// Check if exercise is in favorites\nexport function isFavorite(exerciseId) {\n  const favorites = getFavorites();\n  return favorites.includes(exerciseId);\n}\n\n// Toggle favorite status (add if not exists, remove if exists)\nexport function toggleFavorite(exerciseId) {\n  if (isFavorite(exerciseId)) {\n    removeFromFavorites(exerciseId);\n    return false; // removed\n  } else {\n    addToFavorites(exerciseId);\n    return true; // added\n  }\n}\n\n","import { switchToHome, switchToFavorites } from './exercises.js';\n\n// Current active page\nlet currentPage = 'home';\n\n// Mobile menu elements\nlet mobileMenu = null;\nlet burgerButton = null;\nlet closeButton = null;\nlet overlay = null;\n\n// Switch page and update UI\nexport function switchPage(page) {\n  if (currentPage === page) return;\n\n  currentPage = page;\n  \n  const navLinks = document.querySelectorAll('.header__nav-link');\n  navLinks.forEach(link => {\n    const linkPage = link.getAttribute('data-page');\n    if (linkPage === page) {\n      link.classList.add('header__nav-link--active');\n    } else {\n      link.classList.remove('header__nav-link--active');\n    }\n  });\n\n  const mobileNavLinks = document.querySelectorAll('.mobile-menu__nav-link');\n  mobileNavLinks.forEach(link => {\n    const linkPage = link.getAttribute('data-page');\n    if (linkPage === page) {\n      link.classList.add('mobile-menu__nav-link--active');\n    } else {\n      link.classList.remove('mobile-menu__nav-link--active');\n    }\n  });\n\n  if (page === 'home') {\n    switchToHome();\n  } else if (page === 'favorites') {\n    switchToFavorites();\n  }\n}\n\n// Open mobile menu\nfunction openMobileMenu() {\n  if (mobileMenu) {\n    mobileMenu.classList.add('is-open');\n    burgerButton.classList.add('is-hidden');\n    overlay.classList.add('active');\n    document.body.style.overflow = 'hidden';\n  }\n}\n\n// Close mobile menu\nfunction closeMobileMenu() {\n  if (mobileMenu) {\n    mobileMenu.classList.remove('is-open');\n    burgerButton.classList.remove('is-hidden');\n    overlay.classList.remove('active');\n    document.body.style.overflow = '';\n  }\n}\n\n// Initialize header event listeners\nexport function initHeader() {\n  // Desktop nav links\n  const navLinks = document.querySelectorAll('.header__nav-link');\n\n  navLinks.forEach(link => {\n    link.addEventListener('click', e => {\n      e.preventDefault();\n      const page = link.getAttribute('data-page');\n      if (page) {\n        switchPage(page);\n      }\n    });\n  });\n\n  // Mobile menu elements\n  mobileMenu = document.querySelector('.mobile-menu');\n  burgerButton = document.querySelector('.header__burger');\n  closeButton = document.querySelector('.mobile-menu__close');\n  overlay = document.getElementById('overlay');\n\n  // Burger button\n  if (burgerButton) {\n    burgerButton.addEventListener('click', openMobileMenu);\n  }\n\n  // Close button\n  if (closeButton) {\n    closeButton.addEventListener('click', closeMobileMenu);\n  }\n\n  // Mobile nav links\n  const mobileNavLinks = document.querySelectorAll('.mobile-menu__nav-link');\n  mobileNavLinks.forEach(link => {\n    link.addEventListener('click', e => {\n      e.preventDefault();\n      const page = link.getAttribute('data-page');\n      if (page) {\n        switchPage(page);\n        closeMobileMenu();\n      }\n    });\n  });\n\n  // Close menu on backdrop click\n  if (mobileMenu) {\n    mobileMenu.addEventListener('click', e => {\n      if (e.target === mobileMenu) {\n        closeMobileMenu();\n      }\n    });\n  }\n}\n\n// Get current page\nexport function getCurrentPage() {\n  return currentPage;\n}\n\n","import { openRatingModal } from './rating-modal.js';\nimport {\n  isFavorite,\n  toggleFavorite,\n} from './favorites.js';\nimport { getCurrentPage } from './header.js';\nimport { loadFavoritesExercises } from './exercises.js';\n\n// Змінна для зберігання ID вправи для рейтингу\nlet currentExerciseIdForRating = null;\n\n// Функція для закриття модального вікна\nfunction closeExerciseModal() {\n  const modal = document.getElementById('js-exercise-modal');\n  if (!modal) return;\n\n  modal.classList.remove('exercise-modal--open');\n  document.body.style.overflow = '';\n}\n\n// Функція для відкриття модального вікна з даними вправи\nexport function openExerciseModal(exerciseId) {\n  const modal = document.getElementById('js-exercise-modal');\n  if (!modal) return;\n\n  // Зберігаємо ID вправи для рейтингу\n  currentExerciseIdForRating = exerciseId;\n\n  // Показуємо модальне вікно з індикатором завантаження\n  modal.classList.add('exercise-modal--open');\n  document.body.style.overflow = 'hidden';\n\n  // Отримуємо елементи для заповнення\n  const image = document.getElementById('js-exercise-modal-image');\n  const title = document.getElementById('js-exercise-modal-title');\n  const ratingValue = document.querySelector('.exercise-modal__rating-value');\n  const ratingStars = document.querySelector('.exercise-modal__rating-stars');\n  const target = document.getElementById('js-exercise-modal-target');\n  const bodyPart = document.getElementById('js-exercise-modal-body-part');\n  const equipment = document.getElementById('js-exercise-modal-equipment');\n  const popular = document.getElementById('js-exercise-modal-popular');\n  const calories = document.getElementById('js-exercise-modal-calories');\n  const time = document.getElementById('js-exercise-modal-time');\n  const description = document.getElementById('js-exercise-modal-description');\n\n  // Очищаємо попередні дані\n  if (title) title.textContent = 'Loading...';\n  if (ratingValue) ratingValue.textContent = '0.0';\n  if (target) target.textContent = '';\n  if (bodyPart) bodyPart.textContent = '';\n  if (equipment) equipment.textContent = '';\n  if (popular) popular.textContent = '0';\n  if (calories) calories.textContent = '0';\n  if (time) time.textContent = '/0 min';\n  if (description) description.textContent = '';\n  if (image) image.src = '';\n\n  // Завантажуємо детальну інформацію про вправу\n  fetch(`https://your-energy.b.goit.study/api/exercises/${exerciseId}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error('Failed to fetch exercise details');\n      }\n      return response.json();\n    })\n    .then(exercise => {\n      // Заповнюємо дані модального вікна\n      if (image) image.src = exercise.gifUrl || '';\n      if (title) title.textContent = exercise.name || '';\n      if (target) target.textContent = exercise.target || '';\n      if (bodyPart) bodyPart.textContent = exercise.bodyPart || '';\n      if (equipment) equipment.textContent = exercise.equipment || '';\n      if (popular) popular.textContent = exercise.popularity || 0;\n      if (calories) calories.textContent = exercise.burnedCalories || 0;\n      if (time) time.textContent = `/${exercise.time || 0} min`;\n      if (description) description.textContent = exercise.description || '';\n\n      // Оновлюємо рейтинг\n      if (ratingValue) {\n        ratingValue.textContent = (exercise.rating || 0).toFixed(1);\n      }\n\n      if (ratingStars) {\n        const stars = ratingStars.querySelectorAll(\n          '.exercise-modal__rating-star'\n        );\n        const rating = Math.round(exercise.rating || 0);\n\n        stars.forEach((star, index) => {\n          const path = star.querySelector('path');\n          if (index < rating) {\n            path.setAttribute('fill', '#EEA10C');\n            path.removeAttribute('stroke');\n            path.removeAttribute('stroke-width');\n          } else {\n            path.setAttribute('fill', 'none');\n            path.setAttribute('stroke', 'rgba(255,255,255,0.3)');\n            path.setAttribute('stroke-width', '1.5');\n          }\n        });\n      }\n\n      // Оновлюємо стан кнопки Favorites\n      updateFavoriteButton(exerciseId);\n\n      // Підключення кнопки \"Give a rating\"\n      const ratingBtn = document.getElementById('js-exercise-modal-rating-btn');\n      if (ratingBtn) {\n        // Видаляємо попередні обробники\n        const newRatingBtn = ratingBtn.cloneNode(true);\n        ratingBtn.parentNode.replaceChild(newRatingBtn, ratingBtn);\n\n        newRatingBtn.addEventListener('click', () => {\n          closeExerciseModal();\n          openRatingModal(exerciseId);\n        });\n      }\n    })\n    .catch(error => {\n      if (title) title.textContent = 'Error loading exercise';\n      if (description)\n        description.textContent =\n          'Failed to load exercise details. Please try again later.';\n    });\n}\n\n// Функція для оновлення стану кнопки Favorites\nfunction updateFavoriteButton(exerciseId) {\n  const favoriteBtn = document.getElementById('js-exercise-modal-favorites');\n  if (!favoriteBtn) return;\n\n  const isInFavorites = isFavorite(exerciseId);\n  const btnText = favoriteBtn.querySelector('span');\n  const btnIcon = favoriteBtn.querySelector('svg path');\n\n  if (isInFavorites) {\n    favoriteBtn.classList.add('active');\n    if (btnText) btnText.textContent = 'Remove from favorites';\n    if (btnIcon) {\n      btnIcon.setAttribute('fill', 'currentColor');\n      btnIcon.removeAttribute('stroke');\n      btnIcon.removeAttribute('stroke-width');\n    }\n  } else {\n    favoriteBtn.classList.remove('active');\n    if (btnText) btnText.textContent = 'Add to favorites';\n    if (btnIcon) {\n      btnIcon.setAttribute('fill', 'none');\n      btnIcon.setAttribute('stroke', 'currentColor');\n      btnIcon.setAttribute('stroke-width', '2');\n    }\n  }\n}\n\n// Експорт функції закриття для використання в інших модулях\nexport { closeExerciseModal };\n\n// Ініціалізація event listeners для модального вікна\nexport function initExerciseModal() {\n  // Обробники для модального вікна\n  const modalCloseBtn = document.getElementById('js-exercise-modal-close');\n  const modal = document.getElementById('js-exercise-modal');\n  const modalOverlay = modal?.querySelector('.exercise-modal__overlay');\n\n  if (modalCloseBtn) {\n    modalCloseBtn.addEventListener('click', closeExerciseModal);\n  }\n\n  if (modalOverlay) {\n    modalOverlay.addEventListener('click', closeExerciseModal);\n  }\n\n  // Обробник для кнопки Favorites\n  const favoriteBtn = document.getElementById('js-exercise-modal-favorites');\n  if (favoriteBtn) {\n    favoriteBtn.addEventListener('click', () => {\n      const exerciseId = currentExerciseIdForRating;\n      if (!exerciseId) return;\n\n      const wasAdded = toggleFavorite(exerciseId);\n      updateFavoriteButton(exerciseId);\n\n      // Якщо користувач на сторінці Favorites і видаляє вправу\n      if (!wasAdded && getCurrentPage() === 'favorites') {\n        closeExerciseModal();\n        loadFavoritesExercises();\n      }\n    });\n  }\n}\n\n","import { openExerciseModal } from './exercise-modal.js';\nimport { getFavorites } from './favorites.js';\nimport { showGlobalNotification } from './global-notification.js';\n\nlet currentFilter = 'Muscles';\nlet currentPage = 1;\nlet currentCategory = null;\nlet currentSearchKeyword = '';\nlet currentMode = 'home'; // 'home' або 'favorites'\nconst ITEMS_PER_PAGE = 10;\n\nfunction createOptimizedImage(originalUrl, alt, className = '') {\n  if (!originalUrl) return '';\n  \n  // Базовий URL прокси\n  const proxyBase = 'https://wsrv.nl/?url=';\n\n  // 1. Mobile (~150px для контейнерів 100px+)\n  const sm = `${proxyBase}${originalUrl}&w=150&output=webp&q=75`;\n  \n  // 2. Tablet/Desktop (до 350px)\n  const md = `${proxyBase}${originalUrl}&w=350&output=webp&q=75`;\n  \n  // 3. Retina/Large (до 700px)\n  const lg = `${proxyBase}${originalUrl}&w=700&output=webp&q=80`;\n\n  return `\n    <img \n      class=\"${className}\" \n      src=\"${md}\" \n      srcset=\"${sm} 150w, ${md} 350w, ${lg} 700w\"\n      sizes=\"(max-width: 767px) 150px, (max-width: 1440px) 350px, 350px\"\n      alt=\"${alt}\" \n      loading=\"lazy\" \n      decoding=\"async\"\n    />\n  `;\n}\n\nfunction showSearchField() {\n  const searchField = document.getElementById('js-exercises-search');\n  if (searchField) {\n    searchField.style.display = 'flex';\n  }\n}\n\n// Функція для приховування поля пошуку\nfunction hideSearchField() {\n  const searchField = document.getElementById('js-exercises-search');\n  const searchInput = document.getElementById('js-exercises-search-input');\n  if (searchField) {\n    searchField.style.display = 'none';\n  }\n  if (searchInput) {\n    searchInput.value = '';\n  }\n  currentSearchKeyword = '';\n}\n\n// Функція для ініціалізації слухача подій на контейнері карток (event delegation)\nexport function initCardsEventListener() {\n  const cardsContainer = document.querySelector(\n    '.exercises__content__main__cards'\n  );\n\n  if (!cardsContainer) {\n    return;\n  }\n\n  // Один слухач на весь контейнер замість багатьох на кожній картці\n  cardsContainer.addEventListener('click', event => {\n    // Знаходимо найближчу картку від місця кліку\n    const card = event.target.closest('.exercises__content__main__cards-item');\n\n    if (!card) {\n      return;\n    }\n\n    // Перевіряємо, чи це картка категорії\n    const categoryName = card.getAttribute('data-category-name');\n    if (categoryName) {\n      loadExercisesByCategory(categoryName);      \n      return;\n    }\n\n    // Перевіряємо, чи це картка вправи\n    const exerciseId = card.getAttribute('data-exercise-id');\n    if (exerciseId) {\n      openExerciseModal(exerciseId);\n      return;\n    }\n  });\n}\n\nexport function initHashtags() {\n  const hashtagsContainer = document.querySelector('.home__hashtags');\n  if (!hashtagsContainer) return;\n\n  hashtagsContainer.addEventListener('click', event => {\n    const targetBtn = event.target.closest('button');\n    if (!targetBtn) return;\n\n    const keyword = targetBtn.getAttribute('data-keyword') || targetBtn.textContent.replace('#', '').trim();\n\n    if (currentMode !== 'home') {\n        const homeLink = document.querySelector('.header__nav-link[data-page=\"home\"]');\n        if (homeLink) {\n            homeLink.click();\n        } else {\n            switchToHome();\n        }\n    }\n    \n    const searchInput = document.getElementById('js-exercises-search-input');\n\n    if (searchInput) {\n      searchInput.value = keyword;\n    }\n\n    const exercisesContent = document.querySelector('.exercises__content');\n    if (exercisesContent) {\n        exercisesContent.scrollIntoView({ behavior: 'smooth' });\n    }\n\n    if (currentCategory) {\n      loadExercisesByCategory(currentCategory, 1, keyword);\n    } else {      \n      showGlobalNotification('Please select a category (e.g., abs) to start searching.', 'error');\n    }\n  });\n}\n\n// Функція для створення HTML картки категорії\nfunction createExerciseCard(exercise) {\n  return `\n    <div class=\"exercises__content__main__cards-item\" data-category-name=\"${exercise.name}\">\n      <div class=\"exercises__content__main__cards-item-image\">\n        ${createOptimizedImage(exercise.imgURL, `${exercise.name} exercise`)}\n        <div class=\"exercises__content__main__cards-item-overlay\">\n          <div class=\"exercises__content__main__cards-item-overlay-name\">${exercise.name}</div>\n          <div class=\"exercises__content__main__cards-item-overlay-category\">${exercise.filter}</div>\n        </div>\n      </div>\n    </div>\n  `;\n}\n\n// Функція для створення HTML картки вправи\nfunction createExerciseItemCard(exercise) {\n  const rating = exercise.rating || 0;\n  const burnedCalories = exercise.burnedCalories || 0;\n  const time = exercise.time || 0;\n  const bodyPart = exercise.bodyPart || '';\n  const target = exercise.target || '';\n  const exerciseId = exercise._id || '';\n\n  return `\n    <div class=\"exercises__content__main__cards-item exercises__content__main__cards-item--exercise\" data-exercise-id=\"${exerciseId}\">\n      <div class=\"exercises__content__main__cards-item-header\">\n        <button class=\"exercises__content__main__cards-item-workout-btn\">WORKOUT</button>\n        <div class=\"exercises__content__main__cards-item-rating\">\n          <span class=\"exercises__content__main__cards-item-rating-value\">${rating.toFixed(\n            1\n          )}</span>\n          <svg class=\"exercises__content__main__cards-item-rating-star\" width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M9 0L11.0206 6.21885L17.5595 6.21885L12.2694 10.0623L14.2901 16.2812L9 12.4377L3.70993 16.2812L5.73056 10.0623L0.440492 6.21885L6.97937 6.21885L9 0Z\" fill=\"#EEA10C\"/>\n          </svg>\n        </div>\n        <button class=\"exercises__content__main__cards-item-start-btn\">\n          Start\n          <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M6.75 4.5L11.25 9L6.75 13.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          </svg>\n        </button>\n      </div>\n      <div class=\"exercises__content__main__cards-item-body\">\n        <div class=\"exercises__content__main__cards-item-icon\">\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M12 2L2 7L12 12L22 7L12 2Z\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M2 17L12 22L22 17\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M2 12L12 17L22 12\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          </svg>\n        </div>\n        <h3 class=\"exercises__content__main__cards-item-title\">${\n          exercise.name\n        }</h3>\n      </div>\n      <div class=\"exercises__content__main__cards-item-footer\">\n        <div class=\"exercises__content__main__cards-item-info\">\n          <span class=\"exercises__content__main__cards-item-info-label\">Burned calories:</span>\n          <span class=\"exercises__content__main__cards-item-info-value\">${burnedCalories}</span>\n          <span class=\"exercises__content__main__cards-item-info-label\">/ ${time} min</span>\n        </div>\n        <div class=\"exercises__content__main__cards-item-info\">\n          <span class=\"exercises__content__main__cards-item-info-label\">Body part:</span>\n          <span class=\"exercises__content__main__cards-item-info-value\">${bodyPart}</span>\n        </div>\n        <div class=\"exercises__content__main__cards-item-info\">\n          <span class=\"exercises__content__main__cards-item-info-label\">Target:</span>\n          <span class=\"exercises__content__main__cards-item-info-value\">${target}</span>\n        </div>\n      </div>\n    </div>\n  `;\n}\n\n// Функція для рендерингу карток категорій\nfunction renderExerciseCards(exercises) {\n  const cardsContainer = document.querySelector(\n    '.exercises__content__main__cards'\n  );\n\n  if (!cardsContainer) {\n    return;\n  }\n\n  // Видаляємо клас для карток вправ (якщо був)\n  cardsContainer.classList.remove('exercises__content__main__cards--exercises');\n\n  // Очищаємо контейнер\n  cardsContainer.innerHTML = '';\n\n  // Рендеримо кожну картку\n  exercises.forEach(exercise => {\n    const cardHTML = createExerciseCard(exercise);\n    cardsContainer.insertAdjacentHTML('beforeend', cardHTML);\n  });\n}\n\n// Функція для рендерингу карток вправ\nfunction renderExerciseItemCards(exercises) {\n  const cardsContainer = document.querySelector(\n    '.exercises__content__main__cards'\n  );\n\n  if (!cardsContainer) {\n    return;\n  }\n\n  // Додаємо клас для карток вправ\n  cardsContainer.classList.add('exercises__content__main__cards--exercises');\n\n  // Очищаємо контейнер\n  cardsContainer.innerHTML = '';\n\n  // Рендеримо кожну картку\n  exercises.forEach(exercise => {\n    const cardHTML = createExerciseItemCard(exercise);\n    cardsContainer.insertAdjacentHTML('beforeend', cardHTML);\n  });\n}\n\n// Функція для відображення empty state\nfunction renderEmptyState() {\n  const cardsContainer = document.querySelector(\n    '.exercises__content__main__cards'\n  );\n\n  if (!cardsContainer) {\n    return;\n  }\n\n  // Додаємо клас для карток вправ\n  cardsContainer.classList.add('exercises__content__main__cards--exercises');\n\n  // Очищаємо контейнер\n  cardsContainer.innerHTML = '';\n\n  // Додаємо empty state\n  const emptyStateHTML = `\n    <div class=\"exercises__content__main__empty-state\">\n      <p class=\"exercises__content__main__empty-state-text\">\n        Unfortunately, no results were found. You may want to consider other search options.\n      </p>\n    </div>\n  `;\n\n  cardsContainer.insertAdjacentHTML('beforeend', emptyStateHTML);\n}\n\n// Функція для оновлення breadcrumbs\nexport function updateBreadcrumbs(categoryName = null) {\n  const breadcrumbsContainer = document.getElementById(\n    'js-exercises-breadcrumbs'\n  );\n\n  if (!breadcrumbsContainer) {\n    return;\n  }\n\n  breadcrumbsContainer.innerHTML = '';\n\n  // Якщо режим Favorites - показуємо тільки заголовок \"Favorites\"\n  if (currentMode === 'favorites') {\n    const favoritesTitle = document.createElement('button');\n    favoritesTitle.className =\n      'exercises__content__header-breadcrumbs-item exercises__content__header-breadcrumbs-item--active';\n    favoritesTitle.textContent = 'Favorites';\n    favoritesTitle.setAttribute('data-breadcrumb', 'favorites');\n    breadcrumbsContainer.appendChild(favoritesTitle);\n    return;\n  }\n\n  // Завжди додаємо \"Exercises\"\n  const exercisesBtn = document.createElement('button');\n  exercisesBtn.className = 'exercises__content__header-breadcrumbs-item';\n  exercisesBtn.textContent = 'Exercises';\n  exercisesBtn.setAttribute('data-breadcrumb', 'exercises');\n\n  if (!categoryName) {\n    exercisesBtn.classList.add(\n      'exercises__content__header-breadcrumbs-item--active'\n    );\n  }\n\n  exercisesBtn.addEventListener('click', () => {\n    currentCategory = null;\n    currentPage = 1;\n    loadExerciseCards(currentFilter, currentPage);\n  });\n\n  breadcrumbsContainer.appendChild(exercisesBtn);\n\n  // Якщо є категорія, додаємо її\n  if (categoryName) {\n    const separator = document.createElement('span');\n    separator.className = 'exercises__content__header-breadcrumbs-separator';\n    separator.textContent = '/';\n    breadcrumbsContainer.appendChild(separator);\n\n    const categoryBtn = document.createElement('button');\n    categoryBtn.className =\n      'exercises__content__header-breadcrumbs-item exercises__content__header-breadcrumbs-item--active';\n    categoryBtn.textContent = categoryName;\n    breadcrumbsContainer.appendChild(categoryBtn);\n  }\n}\n\n// Функція для рендерингу пагінації\nfunction renderPagination(totalPages, page = 1) {\n  const paginationContainer = document.querySelector(\n    '.exercises__content__pagination'\n  );\n\n  if (!paginationContainer) {\n    return;\n  }\n\n  // Очищаємо контейнер\n  paginationContainer.innerHTML = '';\n\n  // Якщо лише одна сторінка - не відображаємо пагінацію\n  if (totalPages <= 1) {\n    return;\n  }\n\n  // Функція для переходу на сторінку\n  const goToPage = pageNumber => {\n    currentPage = pageNumber;\n    if (currentMode === 'favorites') {\n      loadFavoritesExercises(pageNumber);\n    } else if (currentCategory) {\n      loadExercisesByCategory(currentCategory, pageNumber, currentSearchKeyword);\n    } else {\n      loadExerciseCards(currentFilter, pageNumber);\n    }\n  };\n\n  const createArrow = (html, isDisabled, onClick) => {\n    const btn = document.createElement('button');\n    btn.className = 'exercises__content__pagination-arrow';\n    btn.innerHTML = html;\n    btn.disabled = isDisabled;\n    btn.addEventListener('click', onClick);\n    return btn;\n  };\n\n  const createPageBtn = num => {\n    const btn = document.createElement('button');\n    btn.className = 'exercises__content__pagination-page';\n    btn.textContent = num;\n    if (num === page) btn.classList.add('exercises__content__pagination-page--active');\n    btn.addEventListener('click', () => goToPage(num));\n    return btn;\n  };\n\n  const createEllipsis = () => {\n    const span = document.createElement('span');\n    span.className = 'exercises__content__pagination-ellipsis';\n    span.textContent = '...';\n    return span;\n  }\n\n  paginationContainer.appendChild(createArrow('&laquo;', page === 1, () => goToPage(1)));\n  paginationContainer.appendChild(createArrow('&lsaquo;', page === 1, () => goToPage(page - 1)));\n\n  const pages = [];\n  pages.push(1);\n\n  if (totalPages <= 7) {\n    for (let i = 2; i <= totalPages; i++) {\n        pages.push(i);\n    }\n  } else {\n    // Якщо сторінок багато\n    let leftBound = page - 1;\n    let rightBound = page + 1;\n\n    if (page < 5) {\n        leftBound = 2;\n        rightBound = 5;\n    }\n\n    if (page > totalPages - 4) {\n        leftBound = totalPages - 4;\n        rightBound = totalPages - 1;\n    }\n\n    if (leftBound > 2) {\n        pages.push('...');\n    }\n\n    for (let i = leftBound; i <= rightBound; i++) {\n        if (i > 1 && i < totalPages) { // Уникаємо дублювання 1 і last\n            pages.push(i);\n        }\n    }\n\n    if (rightBound < totalPages - 1) {\n        pages.push('...');\n    }\n    \n    if (totalPages > 1) {\n        pages.push(totalPages);\n    }\n  }\n\n  pages.forEach(item => {\n    if (item === '...') {\n        paginationContainer.appendChild(createEllipsis());\n    } else {\n        paginationContainer.appendChild(createPageBtn(item));\n    }\n  });\n\n  paginationContainer.appendChild(createArrow('&rsaquo;', page === totalPages, () => goToPage(page + 1)));\n  paginationContainer.appendChild(createArrow('&raquo;', page === totalPages, () => goToPage(totalPages)));\n}\n\n// Функція для завантаження карток категорій\nexport function loadExerciseCards(filter, page = 1) {\n  currentFilter = filter;\n  currentPage = page;\n\n  // Приховуємо поле пошуку при переході до списку категорій\n  hideSearchField();\n\n  // Кодуємо параметри для безпечного передавання в URL\n  const encodedFilter = encodeURIComponent(filter);\n  const url = `https://your-energy.b.goit.study/api/filters?filter=${encodedFilter}&page=${page}`;\n\n  fetch(url)\n    .then(response => response.json())\n    .then(data => {\n      // Припускаємо, що API повертає масив exercises або об'єкт з полем results/exercises\n      const exercises = data.results || data.exercises || data || [];\n\n      // Отримуємо загальну кількість сторінок\n      const totalPages =\n        data.totalPages || data.total_pages || data.pageCount || 1;\n\n      if (Array.isArray(exercises) && exercises.length > 0) {\n        currentCategory = null; // Скидаємо поточну категорію\n        updateBreadcrumbs(null);\n        renderExerciseCards(exercises);\n        renderPagination(totalPages, page);\n      } else {\n        updateBreadcrumbs(null);\n        renderPagination(1, 1);\n      }\n    })\n}\n\n// Функція для завантаження вправ за категорією\nexport function loadExercisesByCategory(\n  categoryName,\n  page = 1,\n  keyword = currentSearchKeyword\n) {\n  currentCategory = categoryName;\n  currentPage = page;\n  currentSearchKeyword = keyword;\n\n  // Показуємо поле пошуку\n  showSearchField();\n\n  // Визначаємо параметр залежно від типу фільтра\n  let paramName = '';\n  if (currentFilter === 'Muscles') {\n    paramName = 'muscles';\n  } else if (currentFilter === 'Body parts') {\n    paramName = 'bodypart';\n  } else if (currentFilter === 'Equipment') {\n    paramName = 'equipment';\n  }\n\n  // Кодуємо параметри для безпечного передавання в URL\n  const encodedCategory = encodeURIComponent(categoryName);\n  let url = `https://your-energy.b.goit.study/api/exercises?${paramName}=${encodedCategory}&page=${page}&limit=10`;\n\n  // Додаємо параметр пошуку якщо він є\n  if (keyword && keyword.trim() !== '') {\n    const encodedKeyword = encodeURIComponent(keyword.trim());\n    url += `&keyword=${encodedKeyword}`;\n  }\n\n  fetch(url)\n    .then(response => {\n      if (response.status === 409) return { results: [], totalPages: 0 };\n      if (!response.ok) throw new Error('Search failed');\n      return response.json();\n    })\n    .then(data => {\n      // Отримуємо масив вправ\n      const exercises = data.results || [];\n\n      // Отримуємо загальну кількість сторінок\n      const totalPages = data.totalPages || 1;\n\n      updateBreadcrumbs(categoryName);\n\n      if (Array.isArray(exercises) && exercises.length > 0) {\n        renderExerciseItemCards(exercises);\n        renderPagination(totalPages, page);\n      } else {\n        // Показуємо empty state\n        renderEmptyState();\n        // Приховуємо пагінацію\n        const paginationContainer = document.querySelector(\n          '.exercises__content__pagination'\n        );\n        if (paginationContainer) {\n          paginationContainer.innerHTML = '';\n        }\n      }\n    })\n}\n\n// Функція для ініціалізації обробників пошуку\nexport function initSearch() {\n  const searchContainer = document.getElementById('js-exercises-search');\n  const searchInput = document.getElementById('js-exercises-search-input');\n\n  if (!searchContainer || !searchInput) return;\n\n  // Функція обробки сабміту пошуку\n  const handleSearchSubmit = () => {\n    const keyword = searchInput.value.trim().toLowerCase();\n\n    if (currentCategory) {\n      // Якщо категорія вибрана, робимо пошук, починаючи з 1 сторінки\n      loadExercisesByCategory(currentCategory, 1, keyword);\n    } else {\n        // Якщо намагаються шукати без категорії\n        showGlobalNotification('Please select a category first', 'error');\n    }\n  };\n\n  searchInput.addEventListener('input', (event) => {\n    const text = event.target.value.trim();\n        \n    if (text === '' && currentCategory) {\n      loadExercisesByCategory(currentCategory, 1, '');\n    }\n  });\n\n  // Слухач на натискання Enter у полі введення\n  searchInput.addEventListener('keydown', (event) => {\n    if (event.key === 'Enter') {\n        event.preventDefault(); // Запобігаємо перезавантаженню, якщо це форма\n        handleSearchSubmit();\n    }\n  });\n\n  // Слухач на клік по іконці пошуку (лупа)\n  const searchIcon = searchContainer.querySelector('.exercises__content__header-search-icon');\n  if (searchIcon) {\n    searchIcon.addEventListener('click', handleSearchSubmit);\n  }\n  /*const searchInput = document.getElementById('js-exercises-search-input');\n\n  if (!searchInput) {\n    return;\n  }\n\n  let searchTimeout = null;\n\n  // Обробка введення тексту з затримкою 1 секунда\n  searchInput.addEventListener('input', () => {\n    // Очищаємо попередній таймер\n    if (searchTimeout) {\n      clearTimeout(searchTimeout);\n    }\n\n    // Встановлюємо новий таймер\n    searchTimeout = setTimeout(() => {\n      const keyword = searchInput.value.trim();\n      if (currentCategory) {\n        loadExercisesByCategory(currentCategory, 1, keyword);\n      }\n    }, 1000);\n  });*/\n}\n\n// Функція для відображення empty state для favorites\nfunction renderFavoritesEmptyState() {\n  const cardsContainer = document.querySelector(\n    '.exercises__content__main__cards'\n  );\n\n  if (!cardsContainer) {\n    return;\n  }\n\n  // Додаємо клас для карток вправ\n  cardsContainer.classList.add('exercises__content__main__cards--exercises');\n\n  // Очищаємо контейнер\n  cardsContainer.innerHTML = '';\n\n  // Додаємо empty state\n  const emptyStateHTML = `\n    <div class=\"exercises__content__main__empty-state\">\n      <p class=\"exercises__content__main__empty-state-text\">\n        It appears that you haven't added any exercises to your favorites yet. \n        To get started, you can add exercises that you like to your favorites \n        for easier access in the future.\n      </p>\n    </div>\n  `;\n\n  cardsContainer.insertAdjacentHTML('beforeend', emptyStateHTML);\n}\n\n// Функція для завантаження вправ з обраного\nexport function loadFavoritesExercises(page = 1) {\n  currentPage = page;\n  const favoriteIds = getFavorites();\n\n  // Оновлюємо breadcrumbs\n  updateBreadcrumbs(null);  \n\n  // Якщо немає обраних вправ\n  if (favoriteIds.length === 0) {\n    renderFavoritesEmptyState();\n    const paginationContainer = document.querySelector('.exercises__content__pagination');\n    if (paginationContainer) paginationContainer.innerHTML = '';\n    return;\n  }\n\n  const totalPages = Math.ceil(favoriteIds.length / ITEMS_PER_PAGE);\n  \n  if (page > totalPages) {\n    page = totalPages;\n    currentPage = page;\n  }\n\n  const startIndex = (page - 1) * ITEMS_PER_PAGE;\n  const endIndex = startIndex + ITEMS_PER_PAGE;\n  const idsToLoad = favoriteIds.slice(startIndex, endIndex);\n  // Завантажуємо деталі кожної вправи\n  const promises = idsToLoad.map(id =>\n    fetch(`https://your-energy.b.goit.study/api/exercises/${id}`)\n      .then(response => {\n        if (!response.ok) {\n          throw new Error('Failed to fetch exercise');\n        }\n        return response.json();\n      })\n      .catch(error => {\n        return null;\n      })\n  );\n\n  Promise.all(promises).then(exercises => {\n    // Фільтруємо null значення (вправи, які не вдалося завантажити)\n    const validExercises = exercises.filter(ex => ex !== null);\n\n    if (validExercises.length > 0) {\n      renderExerciseItemCards(validExercises);\n      renderPagination(totalPages, page);\n    } else {\n      renderFavoritesEmptyState();\n    }\n  });\n}\n\n// Функція для перемикання в режим Home\nexport function switchToHome() {\n  currentMode = 'home';\n  currentCategory = null;\n  currentSearchKeyword = '';\n\n  // Показуємо фільтри\n  const filtersContainer = document.querySelector(\n    '.exercises__content__header-filters'\n  );\n  if (filtersContainer) {\n    filtersContainer.style.display = 'flex';\n  }\n\n  // Видаляємо клас favorites з контейнера\n  const contentContainer = document.querySelector('.exercises__content');\n  if (contentContainer) {\n    contentContainer.classList.remove('exercises__content--favorites');\n  }\n\n  // Завантажуємо стандартні картки\n  loadExerciseCards(currentFilter, 1);\n}\n\n// Функція для перемикання в режим Favorites\nexport function switchToFavorites() {\n  currentMode = 'favorites';\n  currentCategory = null;\n  currentSearchKeyword = '';\n\n  // Приховуємо фільтри та пошук\n  const filtersContainer = document.querySelector(\n    '.exercises__content__header-filters'\n  );\n  if (filtersContainer) {\n    filtersContainer.style.display = 'none';\n  }\n\n  hideSearchField();\n\n  // Додаємо клас favorites до контейнера\n  const contentContainer = document.querySelector('.exercises__content');\n  if (contentContainer) {\n    contentContainer.classList.add('exercises__content--favorites');\n  }\n\n  // Завантажуємо обрані вправи\n  loadFavoritesExercises();\n}\n","import { showGlobalNotification } from './global-notification.js';\nimport { showFieldError, hideFieldError, validateEmail } from './form-validation.js';\n\nexport function initFooterSubscription() {\n  const form = document.getElementById('subscribeForm');\n  const emailInput = document.getElementById('subscribeEmail');\n  const errorElement = document.getElementById('subscribeEmailError');\n\n  if (!form || !emailInput || !errorElement) return;\n\n    emailInput.addEventListener('input', () => {\n    if (validateEmail(emailInput.value) || emailInput.value.trim() === '') {\n      hideFieldError(emailInput, errorElement);\n    }\n  });\n\n  form.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    const email = emailInput.value.trim();\n\n    if (!email) {\n      showFieldError(emailInput, errorElement, 'Please enter your email address');\n      return;\n    }\n\n    if (!validateEmail(email)) {\n      showFieldError(emailInput, errorElement, 'Please enter a valid email address (e.g. name@gmail.com)');\n      return;\n    }\n\n    hideFieldError(emailInput, errorElement);\n\n    try {\n      const response = await fetch('https://your-energy.b.goit.study/api/subscription', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email }),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        showGlobalNotification(data.message, 'success');\n        form.reset();\n      } \n      else if (response.status === 409) {\n        showGlobalNotification(\"You've already subscribed. No need to resubscribe.\", 'warning');\n        form.reset();\n      } \n      else {\n        throw new Error('Subscription failed');\n      }\n\n    } catch (error) {\n      showGlobalNotification('Something went wrong. Please try again later.', 'error');\n      console.error(error);\n    }\n  });\n}","// Helper function to get today's date in YYYY-MM-DD format\nfunction getTodayDate() {\n  const today = new Date();\n  const year = today.getFullYear();\n  const month = String(today.getMonth() + 1).padStart(2, '0');\n  const day = String(today.getDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`;\n}\n\n// Function to load quote data with caching logic\nasync function loadQuoteOfTheDay() {\n  const cachedQuoteText = localStorage.getItem('quote-text');\n  const cachedQuoteAuthor = localStorage.getItem('quote-author');\n  const cachedQuoteDate = localStorage.getItem('quote-date');\n  const todayDate = getTodayDate();\n\n  // Check if cached data exists\n  if (cachedQuoteText && cachedQuoteAuthor && cachedQuoteDate) {\n    // Compare dates\n    if (cachedQuoteDate === todayDate) {\n      // Return cached data if date matches\n      return { quote: cachedQuoteText, author: cachedQuoteAuthor };\n    }\n  }\n\n  // Fetch new quote from API\n  try {\n    const response = await fetch('https://your-energy.b.goit.study/api/quote');\n    const data = await response.json();\n\n    // Save to localStorage\n    localStorage.setItem('quote-text', data.quote);\n    localStorage.setItem('quote-author', data.author);\n    localStorage.setItem('quote-date', todayDate);\n\n    // Return the quote data\n    return { quote: data.quote, author: data.author };\n  } catch (error) {\n    // If fetch fails but we have cached data, use it\n    if (cachedQuoteText && cachedQuoteAuthor) {\n      return { quote: cachedQuoteText, author: cachedQuoteAuthor };\n    }\n\n    // Return null if no data available\n    return null;\n  }\n}\n\n// Function to display quote in DOM\nexport async function displayQuote() {\n  const quoteData = await loadQuoteOfTheDay();\n\n  if (!quoteData) {\n    return;\n  }\n\n  const quoteTextElement = document.getElementById('js-exercises-quote-text');\n  const quoteAuthorElement = document.getElementById(\n    'js-exercises-quote-author'\n  );\n\n  if (quoteTextElement) {\n    quoteTextElement.textContent = quoteData.quote;\n  }\n\n  if (quoteAuthorElement) {\n    quoteAuthorElement.textContent = quoteData.author;\n  }\n}\n","import {\n  loadExerciseCards,\n  updateBreadcrumbs,\n  initSearch,\n  initCardsEventListener,\n  initHashtags,\n} from './js/exercises.js';\nimport { initExerciseModal, closeExerciseModal } from './js/exercise-modal.js';\nimport { initRatingModal, closeRatingModal } from './js/rating-modal.js';\nimport {\n  initGlobalNotification,\n  showGlobalNotification,\n} from './js/global-notification.js';\nimport {\n  showFieldError,\n  hideFieldError,\n  validateEmail,\n} from './js/form-validation.js';\nimport { initFooterSubscription } from './js/email-validation.js';\nimport { initHeader } from './js/header.js';\nimport { displayQuote } from './js/quote.js';\n\n\ndisplayQuote();\n\n/*async function subscribeToNewsletter(email) {\n  try {\n    const response = await fetch(\n      'https://your-energy.b.goit.study/api/subscription',\n      {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          email: email.trim(),\n        }),\n      }\n    );\n\n    if (!response.ok) {\n      throw new Error('Failed to subscribe');\n    }\n\n    const data = await response.json();\n    return { success: true, data };\n  } catch (error) {\n    return { success: false, error: error.message };\n  }\n}*/\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  initExerciseModal();\n  initRatingModal();\n\n  initGlobalNotification();\n\n  initHeader();\n\n  initSearch();\n\n  initCardsEventListener();\n\n  initHashtags();\n\n  initFooterSubscription();\n\n  loadExerciseCards('Muscles', 1);\n\n  document.addEventListener('keydown', e => {\n    if (e.key === 'Escape') {\n      closeExerciseModal();\n      closeRatingModal();\n    }\n  });\n\n  const filterButtons = document.querySelectorAll(\n    '.exercises__content__header-filters-item'\n  );\n\n  filterButtons.forEach(button => {\n    button.addEventListener('click', () => {      \n      filterButtons.forEach(btn =>\n        btn.classList.remove('exercises__content__header-filters-item--active')\n      );\n\n      button.classList.add('exercises__content__header-filters-item--active');\n\n      const filter = button.getAttribute('data-filter');\n      updateBreadcrumbs(null); \n\n      loadExerciseCards(filter, 1);\n    });\n  });\n\n  /*const subscribeForm = document.getElementById('subscribeForm');\n  const subscribeEmailInput = document.getElementById('subscribeEmail');\n  const subscribeEmailError = document.getElementById('subscribeEmailError');\n\n  if (subscribeEmailInput && subscribeEmailError) {\n    subscribeEmailInput.addEventListener('input', () => {\n      hideFieldError(subscribeEmailInput, subscribeEmailError);\n    });\n  }\n\n  if (subscribeForm) {\n    subscribeForm.addEventListener('submit', async e => {\n      e.preventDefault();\n\n      const email = subscribeEmailInput?.value.trim() || '';\n      let hasErrors = false;\n\n      if (!email) {\n        showFieldError(\n          subscribeEmailInput,\n          subscribeEmailError,\n          'Please enter your email address'\n        );\n        hasErrors = true;\n      } else if (!validateEmail(email)) {\n        showFieldError(\n          subscribeEmailInput,\n          subscribeEmailError,\n          'Please enter a valid email address'\n        );\n        hasErrors = true;\n      } else {\n        hideFieldError(subscribeEmailInput, subscribeEmailError);\n      }\n\n      if (hasErrors) {\n        return;\n      }\n\n      const result = await subscribeToNewsletter(email);\n\n      if (result.success) {\n        showGlobalNotification(result.data.message, 'success');\n        subscribeForm.reset();\n        hideFieldError(subscribeEmailInput, subscribeEmailError);\n      } else {\n        showGlobalNotification(result.error, 'error');\n      }\n    });\n  }*/\n});\n"],"names":["notificationTimeout","showGlobalNotification","message","type","notification","textElement","hideGlobalNotification","initGlobalNotification","closeBtn","showFieldError","inputElement","errorElement","errorClass","hideFieldError","validateEmail","email","currentExerciseIdForRating","showServerMessage","messageElement","messageTextElement","hideServerMessage","closeRatingModal","modal","emailInput","emailError","commentTextarea","commentError","ratingError","openRatingModal","exerciseId","form","ratingValue","stars","star","svg","path","initRatingModal","ratingModalCloseBtn","ratingModal","ratingModalOverlay","serverMessageCloseBtn","ratingStars","selectedRating","index","s","i","hoverRating","ratingForm","e","hasErrors","review","response","data","exerciseName","error","errorMessage","FAVORITES_KEY","getFavorites","favorites","addToFavorites","removeFromFavorites","filteredFavorites","id","isFavorite","toggleFavorite","currentPage","mobileMenu","burgerButton","closeButton","overlay","switchPage","page","link","switchToHome","switchToFavorites","openMobileMenu","closeMobileMenu","initHeader","getCurrentPage","closeExerciseModal","openExerciseModal","image","title","target","bodyPart","equipment","popular","calories","time","description","exercise","rating","updateFavoriteButton","ratingBtn","newRatingBtn","favoriteBtn","isInFavorites","btnText","btnIcon","initExerciseModal","modalCloseBtn","modalOverlay","wasAdded","loadFavoritesExercises","currentFilter","currentCategory","currentSearchKeyword","currentMode","ITEMS_PER_PAGE","createOptimizedImage","originalUrl","alt","className","proxyBase","sm","md","lg","showSearchField","searchField","hideSearchField","searchInput","initCardsEventListener","cardsContainer","event","card","categoryName","loadExercisesByCategory","initHashtags","hashtagsContainer","targetBtn","keyword","homeLink","exercisesContent","createExerciseCard","createExerciseItemCard","burnedCalories","renderExerciseCards","exercises","cardHTML","renderExerciseItemCards","renderEmptyState","updateBreadcrumbs","breadcrumbsContainer","favoritesTitle","exercisesBtn","loadExerciseCards","separator","categoryBtn","renderPagination","totalPages","paginationContainer","goToPage","pageNumber","createArrow","html","isDisabled","onClick","btn","createPageBtn","num","createEllipsis","span","pages","leftBound","rightBound","item","filter","url","paramName","encodedCategory","encodedKeyword","initSearch","searchContainer","handleSearchSubmit","searchIcon","renderFavoritesEmptyState","favoriteIds","startIndex","endIndex","promises","validExercises","ex","filtersContainer","contentContainer","initFooterSubscription","getTodayDate","today","year","month","day","loadQuoteOfTheDay","cachedQuoteText","cachedQuoteAuthor","cachedQuoteDate","todayDate","displayQuote","quoteData","quoteTextElement","quoteAuthorElement","filterButtons","button"],"mappings":"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"}